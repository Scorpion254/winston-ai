<body>
  <!-- Background video -->
  <video autoplay muted loop id="bg-video">
      <source src="bg.mp4" type="video/mp4">
      Your browser does not support the video tag.
  </video>

  <!-- Chat overlay -->
  <div class="chat-container">
      <h1>ğŸ¤– Winston AI</h1>
      <div id="chat-box"></div>
      <div class="input-area">
          <input type="text" id="user-input" placeholder="Type your message..." autofocus>
          <button onclick="sendMessage()">Send</button>
      </div>
  </div>

<script>
    async function sendMessage() {
        const input = document.getElementById("user-input");
        const message = input.value.trim();
        if (!message) return;

        const chatBox = document.getElementById("chat-box");

        // Add user's message with animation
        const userDiv = document.createElement("div");
        userDiv.className = "user-msg fade-in-up";
        userDiv.innerHTML = `ğŸ§‘ You: ${message}`;
        chatBox.appendChild(userDiv);
        input.value = "";

        // Auto scroll
        chatBox.scrollTop = chatBox.scrollHeight;

        // Show "thinking..." animation
        const thinkingDiv = document.createElement("div");
        thinkingDiv.className = "bot-msg fade-in";
        thinkingDiv.innerHTML = "ğŸ¤– Winston AI is thinking...";
        chatBox.appendChild(thinkingDiv);
        chatBox.scrollTop = chatBox.scrollHeight;

        // Fetch bot reply
        try {
            const response = await fetch("/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message })
            });

            const data = await response.json();

            // Remove thinking text
            thinkingDiv.remove();

            // Add animated bot reply
            const botDiv = document.createElement("div");
            botDiv.className = "bot-msg fade-in-up";
            botDiv.innerHTML = `ğŸ¤– Winston AI: ${data.reply}`;
            chatBox.appendChild(botDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        } catch (err) {
            thinkingDiv.innerHTML = "âš ï¸ Connection error. Try again.";
        }
    }

    // Allow Enter key to send
    document.getElementById("user-input").addEventListener("keypress", (e) => {
        if (e.key === "Enter") sendMessage();
    });
</script>

</body>
